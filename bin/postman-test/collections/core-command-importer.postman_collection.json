{
	"info": {
		"_postman_id": "871e1f03-6949-42f7-ac4f-83e89f3f216f",
		"name": "core-command-importer",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Import addressable",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8fbfbf8d-1505-48ae-af9e-dc6b532889b4",
						"exec": [
							"// Prepare test data",
							"var data = [",
							"{",
							"  \"name\": \"hvac telxsi thermo address\",",
							"  \"protocol\": \"HTTP\",",
							"  \"address\": \"172.17.0.1\",",
							"  \"port\": 48089,",
							"  \"path\": \"/livingroomthermostat\",",
							"  \"publisher\": \"none\",",
							"  \"user\": \"none\",",
							"  \"password\": \"none\",",
							"  \"topic\": \"none\",",
							"  \"origin\": 1471806386920",
							"},",
							"{",
							"  \"name\": \"variableSpeedMeterTest\",",
							"  \"protocol\": \"HTTP\",",
							"  \"address\": \"172.17.0.1\",",
							"  \"port\": 48089,",
							"  \"path\": \"/variableSpeedMeter\",",
							"  \"publisher\": \"none\",",
							"  \"user\": \"none\",",
							"  \"password\": \"none\",",
							"  \"topic\": \"none\",",
							"  \"origin\": 1471806386921",
							"},",
							"{",
							"  \"name\": \"test addressable for command\",",
							"  \"protocol\": \"HTTP\",",
							"  \"address\": \"172.17.0.2\",",
							"  \"port\": 48089,",
							"  \"path\": \"/livingroomthermostat\",",
							"  \"publisher\": \"none\",",
							"  \"user\": \"none\",",
							"  \"password\": \"none\",",
							"  \"topic\": \"none\",",
							"  \"origin\": 1471806386920",
							"},",
							"{",
							"  \"name\": \"aeroplane tachometer address\",",
							"  \"protocol\": \"HTTP\",",
							"  \"address\": \"localhost\",",
							"  \"port\": 48082,",
							"  \"path\": \"/aeroplanetachometer\",",
							"  \"publisher\": \"none\",",
							"  \"user\": \"none\",",
							"  \"password\": \"none\",",
							"  \"topic\": \"none\",",
							"  \"origin\": 1471806386924",
							"},",
							"{",
							"  \"name\": \"nebulizer address\",",
							"  \"protocol\": \"HTTP\",",
							"  \"address\": \"172.17.0.1\",",
							"  \"port\": 48089,",
							"  \"path\": \"/personalnebulizer\",",
							"  \"publisher\": \"none\",",
							"  \"user\": \"none\",",
							"  \"password\": \"none\",",
							"  \"topic\": \"none\",",
							"  \"origin\": 1471806386911",
							"}",
							"];",
							"",
							"pm.environment.set(\"data\", data);"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "47de7093-d096-4c92-83f4-3f06215ecf31",
						"exec": [
							"var baseUrl = pm.environment.get(\"baseUrl\");",
							"var data = pm.environment.get(\"data\");",
							"var request = {",
							"  url: baseUrl+'/api/v1/addressable',",
							"  method: 'POST',",
							"  body: {",
							"    mode: 'raw',",
							"    raw: 'json string'",
							"  }",
							"};",
							"request = utils.checkToken(request);",
							"",
							"var count = 0;",
							"var failedCount = 0;",
							"data.forEach(function(item, index) { ",
							"    request.body.raw = JSON.stringify(item)",
							"    pm.sendRequest(request, function (err, res) {",
							"        if (res.code!=200) {",
							"            console.log(index, res.stream.toString());",
							"            failedCount++",
							"        }else{",
							"            count++",
							"        }",
							"    });",
							"});",
							"",
							"// Wait for API calls finish.",
							"var interval = setInterval(function(){",
							"    if(count+failedCount == data.length){",
							"        clearInterval(interval);",
							"        console.log(count +\" rows imported\");",
							"        console.log(failedCount +\" rows import failed\");",
							"    }",
							"}, 500);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/v1/ping",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"v1",
						"ping"
					]
				}
			},
			"response": []
		},
		{
			"name": "Import deviceService",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8fbfbf8d-1505-48ae-af9e-dc6b532889b4",
						"exec": [
							"// Prepare test data",
							"var data = [",
							"{",
							"  \"adminState\": \"LOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"name\": \"aeroplane tachometer device service\",",
							"  \"description\": \"manage aeroplane tachometer\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"aeroplane\",",
							"    \"tachometer\"",
							"  ],",
							"  \"origin\": 1471806386924,",
							"  \"addressable\": {",
							"    \"name\": \"hvac telxsi thermo address\"",
							"  }",
							"},",
							"{",
							"  \"adminState\": \"UNLOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"name\": \"home telxsi thermostat device service\",",
							"  \"description\": \"manage home thermostats\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"hvac\",",
							"    \"thermostat\"",
							"  ],",
							"  \"origin\": 1471806386920,",
							"  \"addressable\": {",
							"    \"name\": \"hvac telxsi thermo address\"",
							"  }",
							"},",
							"{",
							"  \"adminState\": \"UNLOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"name\": \"Test update thermostat deviceservice\",",
							"  \"description\": \"manage homethermostats\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"hvac\",",
							"    \"thermostat\"",
							"  ],",
							"  \"origin\": 1471806386921,",
							"  \"addressable\": {",
							"    \"name\": \"aeroplane tachometer address\"",
							"  }",
							"},",
							"{",
							"  \"adminState\": \"UNLOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"name\": \"test service for core command\",",
							"  \"description\": \"manage home thermostats\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"hvac\",",
							"    \"thermostat\"",
							"  ],",
							"  \"origin\": 1471806386920,",
							"  \"addressable\": {",
							"    \"name\": \"aeroplane tachometer address\"",
							"  }",
							"},",
							"{",
							"  \"adminState\": \"UNLOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"name\": \"home telxsi thermostat device service #2\",",
							"  \"description\": \"manage home thermostats\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"hvac\",",
							"    \"thermostat\"",
							"  ],",
							"  \"origin\": 1471806386920,",
							"  \"addressable\": {",
							"    \"name\": \"nebulizer address\"",
							"  }",
							"}",
							"];",
							"",
							"pm.environment.set(\"data\", data);"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "47de7093-d096-4c92-83f4-3f06215ecf31",
						"exec": [
							"var baseUrl = pm.environment.get(\"baseUrl\");",
							"var data = pm.environment.get(\"data\");",
							"var request = {",
							"  url: baseUrl+'/api/v1/deviceservice',",
							"  method: 'POST',",
							"  body: {",
							"    mode: 'raw',",
							"    raw: 'json string'",
							"  }",
							"};",
							"request = utils.checkToken(request);",
							"",
							"var count = 0;",
							"var failedCount = 0;",
							"data.forEach(function(item, index) { ",
							"    request.body.raw = JSON.stringify(item)",
							"    pm.sendRequest(request, function (err, res) {",
							"        if (res.code!=200) {",
							"            console.log(index, res.stream.toString());",
							"            failedCount++",
							"        }else{",
							"            count++",
							"        }",
							"    });",
							"});",
							"",
							"// Wait for API calls finish.",
							"var interval = setInterval(function(){",
							"    if(count+failedCount == data.length){",
							"        clearInterval(interval);",
							"        console.log(count +\" rows imported\");",
							"        console.log(failedCount +\" rows import failed\");",
							"    }",
							"}, 500);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/v1/ping",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"v1",
						"ping"
					]
				}
			},
			"response": []
		},
		{
			"name": "Import deviceProfile",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8fbfbf8d-1505-48ae-af9e-dc6b532889b4",
						"exec": [
							"// Prepare test data",
							"var data = [",
							"{",
							"  \"name\": \"telxsi thermostat profile\",",
							"  \"manufacturer\": \"Honeywell\",",
							"  \"model\": \"ABC123\",",
							"  \"labels\": [",
							"    \"bacnet\",",
							"    \"thermostat\",",
							"    \"Honeywell\"",
							"  ],",
							"  \"description\": \"BACnet Honeywell thermostats\",",
							"  \"deviceCommands\": [{",
							"    \"name\": \"CurrentHumidity\",",
							"    \"get\": [",
							"      {",
							"        \"parameter\": \"CurrentHumidity\",",
							"        \"property\": \"presentValue\",",
							"        \"operation\": \"get\",",
							"        \"object\": \"AnalogValue_22\"",
							"      }",
							"    ]",
							"  }],",
							"  \"origin\": 1471806386919,",
							"  \"coreCommands\": [",
							"    {",
							"      \"name\": \"telxsi cooling point\",",
							"      \"get\": {",
							"        \"path\": \"/telxsicooling\"",
							"      },",
							"      \"put\": {",
							"        \"parameters\": [",
							"          {",
							"            \"name\": \"coolingpoint\",",
							"            \"value\": \"float\"",
							"          }",
							"        ],",
							"        \"path\": \"/telxsicooling\"",
							"      },",
							"      \"origin\": 1471806386919",
							"    }",
							"  ]",
							"},",
							"{",
							"  \"name\": \"livingroom thermostat profile\",",
							"  \"manufacturer\": \"Honeywell\",",
							"  \"model\": \"ABC123\",",
							"  \"labels\": [",
							"    \"bacnet\",",
							"    \"thermostat\",",
							"    \"Honeywell\"",
							"  ],",
							"  \"description\": \"BACnet livingroom thermostats\",",
							"  \"deviceCommands\": [{",
							"    \"name\": \"CurrentHumidity\",",
							"    \"get\": [",
							"      {",
							"        \"parameter\": \"CurrentHumidity\",",
							"        \"property\": \"presentValue\",",
							"        \"operation\": \"get\",",
							"        \"object\": \"AnalogValue_22\"",
							"      }",
							"    ]",
							"  }],",
							"  \"origin\": 1471806386919,",
							"  \"coreCommands\": [",
							"    {",
							"      \"name\": \"living room command\",",
							"      \"get\": {",
							"        \"path\": \"/cooling\"",
							"      },",
							"      \"put\": {",
							"        \"parameters\": [",
							"          {",
							"            \"name\": \"coolingpoint\",",
							"            \"value\": \"float\"",
							"          }",
							"        ],",
							"        \"path\": \"/cooling\"",
							"      },",
							"      \"origin\": 1471806386919",
							"    }",
							"  ]",
							"},",
							"{",
							"  \"name\": \"aeroplane tachometer profile\",",
							"  \"manufacturer\": \"Honeywell\",",
							"  \"model\": \"ABC123\",",
							"  \"labels\": [",
							"    \"aeroplane\",",
							"    \"tachometer\",",
							"    \"Honeywell\"",
							"  ],",
							"  \"description\": \"BACnet Honeywell tachometers\",",
							"  \"deviceCommands\": [{",
							"    \"name\": \"CurrentHumidity\",",
							"    \"get\": [",
							"      {",
							"        \"parameter\": \"CurrentRPM\",",
							"        \"property\": \"presentValue\",",
							"        \"operation\": \"get\",",
							"        \"object\": \"AnalogValue_2000\"",
							"      }",
							"    ]",
							"  }],",
							"  \"origin\": 1471806386924,",
							"  \"coreCommands\": [",
							"    {",
							"      \"name\": \"min revelutions \",",
							"      \"get\": {",
							"        \"path\": \"/aeroplaneenginerevelutionsperminute\"",
							"      },",
							"      \"put\": {",
							"        \"parameters\": [",
							"          {",
							"            \"name\": \"min revelutions\",",
							"            \"value\": \"float\"",
							"          }",
							"        ],",
							"        \"path\": \"/aeroplaneenginerevelutionsperminute\"",
							"      },",
							"      \"origin\": 1471806386924",
							"    }",
							"  ]",
							"},",
							"{",
							"  \"name\": \"test device profile\",",
							"  \"manufacturer\": \"Honeywell\",",
							"  \"model\": \"ABC123\",",
							"  \"labels\": [",
							"    \"bacnet\",",
							"    \"thermostat\",",
							"    \"Honeywell\"",
							"  ],",
							"  \"description\": \"BACnet Honeywell thermostats\",",
							"  \"deviceCommands\": [{",
							"    \"name\": \"CurrentHumidity\",",
							"    \"get\": [",
							"      {",
							"        \"parameter\": \"CurrentHumidity\",",
							"        \"property\": \"presentValue\",",
							"        \"operation\": \"get\",",
							"        \"object\": \"AnalogValue_22\"",
							"      }",
							"    ]",
							"  }],",
							"  \"origin\": 1471806386919,",
							"  \"coreCommands\": [",
							"    {",
							"      \"name\": \"cooling point\",",
							"      \"get\": {",
							"        \"path\": \"/cooling\",",
							"        \"response\": {",
							"          \"code\": \"200\",",
							"          \"errorDescription\": \"not a float\",",
							"          \"expectedValues\": \"temperature\"",
							"        }",
							"      },",
							"      \"put\": {",
							"        \"parameters\": [",
							"          {",
							"            \"name\": \"coolingpoint\",",
							"            \"value\": \"float\"",
							"          }",
							"        ],",
							"        \"path\": \"/cooling\",",
							"        \"response\": {",
							"          \"code\": \"200\",",
							"          \"errorDescription\": \"not a float\",",
							"          \"expectedValues\": \"temperature\"",
							"        }",
							"      },",
							"      \"origin\": 1471806386919",
							"    }",
							"  ]",
							"},",
							"{",
							"  \"name\": \"nebulizer profile\",",
							"  \"manufacturer\": \"Honeywell\",",
							"  \"model\": \"ABC123\",",
							"  \"labels\": [",
							"    \"bacnet\",",
							"    \"thermostat\",",
							"    \"Honeywell\"",
							"  ],",
							"  \"description\": \"BACnet Honeywell nebulizer\",",
							"  \"deviceCommands\": [{",
							"    \"name\": \"CurrentHumidity\",",
							"    \"get\": [",
							"      {",
							"        \"parameter\": \"CurrentHumidity\",",
							"        \"property\": \"presentValue\",",
							"        \"operation\": \"get\",",
							"        \"object\": \"AnalogValue_22\"",
							"      }",
							"    ]",
							"  }],",
							"  \"origin\": 1471806386911,",
							"  \"coreCommands\": [",
							"    {",
							"      \"name\": \"percentage\",",
							"      \"get\": {",
							"        \"path\": \"/oxygenpercentage\"",
							"      },",
							"      \"put\": {",
							"        \"parameters\": [",
							"          {",
							"            \"name\": \"percentage\",",
							"            \"value\": \"float\"",
							"          }",
							"        ],",
							"        \"path\": \"/oxygenpercentage\"",
							"      },",
							"      \"origin\": 1471806386911",
							"    }",
							"  ]",
							"}",
							"];",
							"",
							"pm.environment.set(\"data\", data);"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "47de7093-d096-4c92-83f4-3f06215ecf31",
						"exec": [
							"var baseUrl = pm.environment.get(\"baseUrl\");",
							"var data = pm.environment.get(\"data\");",
							"var request = {",
							"  url: baseUrl+'/api/v1/deviceprofile',",
							"  method: 'POST',",
							"  body: {",
							"    mode: 'raw',",
							"    raw: 'json string'",
							"  }",
							"};",
							"request = utils.checkToken(request);",
							"",
							"var count = 0;",
							"var failedCount = 0;",
							"data.forEach(function(item, index) { ",
							"    request.body.raw = JSON.stringify(item)",
							"    pm.sendRequest(request, function (err, res) {",
							"        if (res.code!=200) {",
							"            console.log(index, res.stream.toString());",
							"            failedCount++",
							"        }else{",
							"            count++",
							"        }",
							"    });",
							"});",
							"",
							"// Wait for API calls finish.",
							"var interval = setInterval(function(){",
							"    if(count+failedCount == data.length){",
							"        clearInterval(interval);",
							"        console.log(count +\" rows imported\");",
							"        console.log(failedCount +\" rows import failed\");",
							"    }",
							"}, 500);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/v1/ping",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"v1",
						"ping"
					]
				}
			},
			"response": []
		},
		{
			"name": "Import device",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8fbfbf8d-1505-48ae-af9e-dc6b532889b4",
						"exec": [
							"// Prepare test data",
							"var data = [",
							"{",
							"  \"name\": \"livingroomthermostat\",",
							"  \"description\": \"living room HVAC thermostat\",",
							"  \"adminState\": \"UNLOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"home\",",
							"    \"hvac\",",
							"    \"thermostat\"",
							"  ],",
							"  \"location\": \"{lat:45.45,long:47.80}\",",
							"  \"responseDelay\": 0,",
							"  \"origin\": 1471806386919,",
							"  \"protocols\":{",
							"    \"modbus-tcp\":{",
							"        \"host\":\"localhost\",",
							"        \"port\":\"1211\",",
							"        \"unitID\":\"1\"",
							"    }",
							"  },",
							"  \"service\": {",
							"    \"name\": \"aeroplane tachometer device service\",",
							"    \"adminState\": \"LOCKED\",",
							"    \"operatingState\": \"ENABLED\",",
							"    \"addressable\": {",
							"        \"name\": \"hvac telxsi thermo address\"",
							"    }",
							"  },",
							"  \"profile\": {",
							"    \"name\": \"livingroom thermostat profile\"",
							"  }",
							"},",
							"{",
							"  \"name\": \"Livingroom automation\",",
							"  \"description\": \"Home automation system\",",
							"  \"adminState\": \"LOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"home\",",
							"    \"hvac\",",
							"    \"thermostat\"",
							"  ],",
							"  \"location\": \"{lat:45.45,long:47.80}\",",
							"  \"responseDelay\": 0,",
							"  \"origin\": 1471806386919,",
							"  \"protocols\":{",
							"    \"modbus-tcp\":{",
							"        \"host\":\"localhost\",",
							"        \"port\":\"1212\",",
							"        \"unitID\":\"1\"",
							"    }",
							"  },",
							"  \"service\": {",
							"    \"name\": \"test service for core command\",",
							"    \"adminState\": \"UNLOCKED\",",
							"    \"operatingState\": \"ENABLED\",",
							"    \"addressable\": {",
							"        \"name\": \"aeroplane tachometer address\"",
							"    }",
							"  },",
							"  \"profile\": {",
							"    \"name\": \"test device profile\"",
							"  }",
							"},",
							"{",
							"  \"name\": \"test device for command\",",
							"  \"description\": \"living room HVAC thermostat\",",
							"  \"adminState\": \"UNLOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"home\",",
							"    \"hvac\",",
							"    \"thermostat\"",
							"  ],",
							"  \"location\": \"{lat:45.45,long:47.80}\",",
							"  \"responseDelay\": 0,",
							"  \"origin\": 1471806386919,",
							"  \"protocols\":{",
							"    \"modbus-tcp\":{",
							"        \"host\":\"localhost\",",
							"        \"port\":\"1213\",",
							"        \"unitID\":\"1\"",
							"    }",
							"  },",
							"  \"service\": {",
							"    \"name\": \"home telxsi thermostat device service #2\",",
							"    \"adminState\": \"UNLOCKED\",",
							"    \"operatingState\": \"ENABLED\",",
							"    \"addressable\": {",
							"        \"name\": \"nebulizer address\"",
							"    }",
							"  },",
							"  \"profile\": {",
							"    \"name\": \"test device profile\"",
							"  }",
							"},",
							"{",
							"  \"name\": \"aeroplanetachometer\",",
							"  \"description\": \"aeroplane engine rev-counter\",",
							"  \"adminState\": \"LOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"aeroplane\",",
							"    \"rev-counter\",",
							"    \"tachometer\"",
							"  ],",
							"  \"location\": \"{lat:55.46,long:58.80}\",",
							"  \"responseDelay\": 0,",
							"  \"origin\": 1471806386924,",
							"  \"protocols\":{",
							"    \"modbus-tcp\":{",
							"        \"host\":\"localhost\",",
							"        \"port\":\"1214\",",
							"        \"unitID\":\"1\"",
							"    }",
							"  },",
							"  \"service\": {",
							"    \"name\": \"test service for core command\",",
							"    \"adminState\": \"UNLOCKED\",",
							"    \"operatingState\": \"ENABLED\",",
							"    \"addressable\": {",
							"        \"name\": \"aeroplane tachometer address\"",
							"    }",
							"  },",
							"  \"profile\": {",
							"    \"name\": \"test device profile\"",
							"  }",
							"},",
							"{",
							"  \"name\": \"test device-2 for command\",",
							"  \"description\": \"living room HVAC thermostat\",",
							"  \"adminState\": \"LOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"home\",",
							"    \"hvac\",",
							"    \"thermostat\"",
							"  ],",
							"  \"location\": \"{lat:45.45,long:47.80}\",",
							"  \"responseDelay\": 0,",
							"  \"origin\": 1471806386919,",
							"  \"protocols\":{",
							"    \"modbus-tcp\":{",
							"        \"host\":\"localhost\",",
							"        \"port\":\"1215\",",
							"        \"unitID\":\"1\"",
							"    }",
							"  },",
							"  \"service\": {",
							"    \"name\": \"home telxsi thermostat device service #2\",",
							"    \"adminState\": \"UNLOCKED\",",
							"    \"operatingState\": \"ENABLED\",",
							"    \"addressable\": {",
							"        \"name\": \"nebulizer address\"",
							"    }",
							"  },",
							"  \"profile\": {",
							"    \"name\": \"test device profile\"",
							"  }",
							"},",
							"{",
							"  \"name\": \"nebulizer\",",
							"  \"description\": \"personal nebulizer\",",
							"  \"adminState\": \"UNLOCKED\",",
							"  \"operatingState\": \"ENABLED\",",
							"  \"lastConnected\": 0,",
							"  \"lastReported\": 0,",
							"  \"labels\": [",
							"    \"personal\",",
							"    \"breather\",",
							"    \"nebulizer\"",
							"  ],",
							"  \"location\": \"{lat:45.45,long:47.80}\",",
							"  \"responseDelay\": 0,",
							"  \"origin\": 1471806386911,",
							"  \"protocols\":{  ",
							"    \"modbus-tcp\":{  ",
							"        \"host\":\"localhost\",",
							"        \"port\":\"1216\",",
							"        \"unitID\":\"1\"",
							"    }",
							"  },",
							"  \"service\": {",
							"    \"name\": \"test service for core command\",",
							"    \"adminState\": \"UNLOCKED\",",
							"    \"operatingState\": \"ENABLED\",",
							"    \"addressable\": {",
							"        \"name\": \"aeroplane tachometer address\"",
							"    }",
							"  },",
							"  \"profile\": {",
							"    \"name\": \"test device profile\"",
							"  }",
							"}",
							"];",
							"",
							"pm.environment.set(\"data\", data);"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "47de7093-d096-4c92-83f4-3f06215ecf31",
						"exec": [
							"var baseUrl = pm.environment.get(\"baseUrl\");",
							"var data = pm.environment.get(\"data\");",
							"var request = {",
							"  url: baseUrl+'/api/v1/device',",
							"  method: 'POST',",
							"  body: {",
							"    mode: 'raw',",
							"    raw: 'json string'",
							"  }",
							"};",
							"request = utils.checkToken(request);",
							"",
							"var count = 0;",
							"var failedCount = 0;",
							"data.forEach(function(item, index) { ",
							"    request.body.raw = JSON.stringify(item)",
							"    pm.sendRequest(request, function (err, res) {",
							"        if (res.code!=200) {",
							"            console.log(index, res.stream.toString());",
							"            failedCount++",
							"        }else{",
							"            count++",
							"        }",
							"    });",
							"});",
							"",
							"// Wait for API calls finish.",
							"var interval = setInterval(function(){",
							"    if(count+failedCount == data.length){",
							"        clearInterval(interval);",
							"        console.log(count +\" rows imported\");",
							"        console.log(failedCount +\" rows import failed\");",
							"    }",
							"}, 500);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/v1/ping",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"v1",
						"ping"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{accessToken}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "83ecce29-f20e-441b-aee7-02f57807cd49",
				"type": "text/javascript",
				"exec": [
					"utils = {",
					"    checkToken: function(request) {",
					"        var accessToken = pm.globals.get(\"accessToken\");",
					"        if (accessToken !== undefined) {",
					"            var header = {",
					"                authorization: 'Bearer '+accessToken",
					"            };",
					"            request.header = header;   ",
					"        }",
					"        return request;",
					"    }",
					"};",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "c130099b-24aa-45cb-9950-aef7285f70b6",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}